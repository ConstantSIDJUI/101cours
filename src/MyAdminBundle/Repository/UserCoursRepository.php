<?php

namespace MyAdminBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * UserCoursRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserCoursRepository extends EntityRepository
{
    /**
     * Get cours for city
     * @return list cours for city
     * @access public
     * @version 1.0
     * @Author Constant SIDJUI
     * @copyright ©100Cours 2017.
     */
    public function getCoursSearchCity($data){
        
        // Build query builder
    	$qb = $this->createQueryBuilder('l')
                   ->select('l')
                   ->join('l.cours', 'c')
                   ->where('c = :cours')
                   ->andWhere('l.activated = :active')
                   ->andWhere('l.cities = :city')
                   ->andWhere('l.level = :level')
                   ->setParameter('city', $data['cities'])
                   ->setParameter('level', $data['level'])
                   ->setParameter('cours', $data['cours'])
                   ->setParameter('active', true);
        
        // Get query
        $query = $qb->getQuery();
    	
    	// Return results
        return $query->getResult();
    }
    
    /**
     * Get all list cours
     * @return lis of cours
     * @access public
     * @version 1.0
     * @Author Constant SIDJUI
     * @copyright ©100Cours 2017.
     */
    public function getCoursSearch($data){
        
        // Build query builder
    	$qb = $this->createQueryBuilder('l')
                   ->select('l')
                   ->join('l.cours', 'c')
                   ->where('c = :cours')
                   ->andWhere('l.activated = :active')
                   ->andWhere('l.level = :level')
                   ->setParameter('level', $data['level'])
                   ->setParameter('cours', $data['cours'])
                   ->setParameter('active', true);
        
        // Get query
        $query = $qb->getQuery();
    	
    	// Return results
        return $query->getResult();
    }
}
